# 帽梁钢筋定位算法

An algorithm of hat beam rebar positioning

## 背景

典型盖梁柱式墩的帽梁设计中，要合理布置内部的骨架钢筋以满足受力要求，这往往需要多次调整和计算，程序为了便于根据构造绘制工程图纸和计算，需要知道内部钢筋的精确位置，为此通常使用坐标点来表达和描述钢筋信息。

而工程人员表达一根骨架钢筋则往往使用层数和一些相对定位的参数表示，这种表达形式不用计算精确坐标就可以描述和定义一根钢筋，便于表达工程概念。

由此引发一个问题：程序界面要便于工程人员使用，必须使用符合工程习惯的界面输入方式；而程序为了出图或计算以及内部加工的方便，则使用坐标点的方式。两种方式之间需要一个转换算法来根据层数及相对定位的信息计算得到各钢筋点的精确坐标，本程序就是为了尝试完成这个算法。

## 需求

1. 根据已知数据合理组织程序逻辑和数据对象；
2. 计算**外轮廓筋**中各点的精确坐标；
3. 计算所有**斜筋**的控制点和非控制点的精确坐标；
4. 计算所有**圆弧筋**的控制点精确坐标、两个切点的精确坐标以及圆弧的圆心坐标；
5. 计算所有**截断筋**的控制点精确坐标；
6. 在程序框架内制作合适的表格界面功能供数据输入、输出，并将骨架结果的 3 维模型显示在场景窗口中。

## 关键点

### 面向对象设计

- 如何定义对象的**数据结构**是关键；
- 工程人员输入的 UI 数据和软件内部进行定位计算的坐标数据是两套数据，如何进行传值是难点。

### 控制点

- **弯起层为负数**，弯止层为 0的，为截断筋；
- 弯起层为 0，**弯止层为 -1**的，为圆弧筋；
- 其余的为单斜筋。

### 层间关系

- 各钢筋顺延段只能紧贴在一起，意味着层与层间隔距离为钢筋直径；
- 钢筋外皮接触到即终止，不是按中心相交来处理。